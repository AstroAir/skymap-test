# 天文摄影

SkyMap Test 提供天文摄影辅助功能，帮助您规划和执行天文摄影任务。

## 功能概览

### 核心功能

- **视野模拟** - 预览相机成像范围
- **曝光计算** - 计算最佳曝光参数
- **马赛克规划** - 规划多帧拼接
- **解析定位** - Plate Solving 图像解析

### 设备支持

- 各类天文相机（CCD/CMOS）
- 数码单反相机（DSLR）
- 望远镜和镜头组合

## 视野模拟器

### 打开方式

1. 点击工具栏的 FOV 图标
2. 或使用快捷键 `F`

### 配置视野

1. 选择望远镜（从设备列表）
2. 选择相机（从设备列表）
3. 可选：添加增倍镜/减焦镜
4. 视野框自动显示在星图上

### 视野信息

显示的参数包括：

- **视野角度** - 水平和垂直视野（度/分）
- **像素比例** - 角秒/像素
- **分辨率** - 图像分辨率
- **焦距** - 等效焦距

### 调整视野

- **位置** - 拖动视野框移动
- **旋转** - 按 `R` 旋转，`Shift+R` 反向
- **中心** - 双击定位到视野中心

## 马赛克模式

### 启用马赛克

1. 在 FOV 模拟器中开启马赛克模式
2. 或按快捷键 `M`

### 配置马赛克

设置马赛克参数：

- **行数** - 垂直方向帧数
- **列数** - 水平方向帧数
- **重叠** - 帧间重叠百分比（推荐 10-20%）
- **旋转** - 整体旋转角度

### 网格类型

- **矩形网格** - 标准行列排列
- **蜂窝网格** - 交错排列，更高效率
- **螺旋网格** - 从中心向外螺旋

### 查看覆盖

马赛克显示：

- 每帧的覆盖范围
- 帧编号和顺序
- 总覆盖面积
- 估计拍摄时间

## 曝光计算器

### 打开方式

1. 点击工具菜单的 "曝光计算器"
2. 或使用快捷键 `Ctrl+Shift+X`

### 输入参数

配置以下参数：

- **目标表面亮度** - 以 `mag/arcsec²` 近似目标单位面积亮度
- **目标信号率（可选）** - 直接输入 `e⁻/px/s` 覆盖表面亮度估算
- **望远镜口径** - 主镜口径（mm）
- **焦比** - f/值
- **相机参数** - 量子效率、读出噪声、暗电流
- **天空背景** - 背景亮度（mag/arcsec²）
- **目标信噪比** - 期望的 SNR

### 计算结果

- **单帧曝光时间** - 推荐的单帧曝光
- **叠加帧数** - 达到目标 SNR 需要的帧数
- **总曝光时间** - 累计曝光时间
- **信噪比曲线** - SNR 随曝光时间变化

> 说明：曝光计算器用于**曝光优化与拍摄规划**，并非用于目标真实物理光度反演。
> 对于窄带、强光害、传感器增益非线性等场景，请结合实测直方图与标定帧校验。

## Plate Solving

### 功能说明

Plate Solving（解析定位）可以：

- 确定图像的精确天球坐标
- 识别图像中的天体
- 同步望远镜指向

### 使用方法

1. 打开 Plate Solver 面板
2. 加载图像（FITS/JPEG/PNG）
3. 点击 "解析"
4. 查看结果和匹配的天体

### 解析结果

成功解析后显示：

- **中心坐标** - 图像中心的 RA/Dec
- **视野大小** - 实际成像范围
- **旋转角度** - 图像旋转
- **匹配恒星** - 用于定位的参考星

### 同步到星图

解析成功后可以：

- 将星图定位到图像位置
- 显示 FOV 框架
- 与目标位置对比

## 拍摄清单

### 创建清单

1. 添加多个拍摄目标
2. 为每个目标设置：
   - 曝光时间
   - 帧数
   - 滤镜
   - 优先级

### 优化顺序

系统可以自动优化拍摄顺序：

- 按子午线时间排序
- 最小化换向次数
- 考虑目标高度变化

### 时间估算

清单显示：

- 每个目标的拍摄时间
- 总拍摄时间
- 预计完成时间

## 快捷操作

| 操作 | 快捷键 |
|------|--------|
| 显示/隐藏视野框 | `F` |
| 切换马赛克模式 | `M` |
| 旋转视野 | `R` / `Shift+R` |
| 打开曝光计算器 | `Ctrl+Shift+X` |
| 打开 Plate Solver | `Ctrl+P` |

## 相关文档

- **[设备管理](../equipment/index.md)** - 配置望远镜和相机
- **[观测规划](../observation-planning/index.md)** - 规划拍摄目标

---

返回：[用户指南](../index.md)
