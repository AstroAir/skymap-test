# 相机配置

本文档介绍如何在 SkyMap Test 中配置和管理天文相机。

## 相机管理

### 打开设备管理器

- **工具栏**：点击设备图标
- **菜单**：工具 → 设备管理器
- **快捷键**：Ctrl+E

### 相机列表

设备管理器显示所有已添加的相机：

- 相机名称
- 传感器规格
- 默认标记
- 操作按钮

## 添加相机

### 基本信息

添加新相机时需要输入：

**必填信息**
- **名称**：相机的识别名称
- **传感器宽度**：传感器物理宽度（毫米）
- **传感器高度**：传感器物理高度（毫米）
- **像素宽度**：单个像素宽度（微米）
- **像素高度**：单个像素高度（微米）

**可选信息**
- **品牌**：制造商
- **型号**：产品型号
- **分辨率**：总像素数

### 相机类型

选择相机类型：

| 类型 | 描述 | 特点 |
|-----|------|------|
| CCD | 电荷耦合器件 | 低噪声、高灵敏 |
| CMOS | 互补金属氧化物半导体 | 快速读出、低成本 |
| DSLR | 数码单反 | 多功能、彩色 |
| 无反 | 无反光镜相机 | 轻便、实时取景 |

### 传感器参数

**尺寸规格**

常见传感器尺寸：

| 规格 | 尺寸（毫米） | 典型应用 |
|-----|------------|---------|
| 全画幅 | 36 × 24 | 高端天文相机 |
| APS-C | 23.5 × 15.6 | 入门天文相机 |
| M4/3 | 17.3 × 13 | 便携设备 |
| 1英寸 | 13.2 × 8.8 | 行星相机 |
| 1/1.2英寸 | 10.67 × 8 | 小型行星相机 |

**像素参数**

- **像素大小**：通常 2-10 微米
- **像素数量**：由分辨率决定
- **满井容量**：电子容量
- **读出噪声**：ADU 值

### 高级参数

**性能参数**
- **增益范围**：最小到最大增益
- **量子效率**：QE 曲线峰值
- **暗电流**：电子/像素/秒
- **动态范围**：分贝值

**连接参数**
- **接口类型**：USB、以太网等
- **位深度**：8/12/14/16位
- **帧率**：最大帧率

## 编辑相机

### 修改参数

1. 在列表中选择相机
2. 点击"编辑"按钮
3. 修改需要更改的参数
4. 点击"保存"

### 复制相机

基于现有相机创建新配置：

1. 选择要复制的相机
2. 点击"复制"
3. 修改名称和参数
4. 保存为新相机

### 删除相机

1. 选择要删除的相机
2. 点击"删除"
3. 确认删除操作

## 默认相机

### 设置默认

将常用相机设为默认：

1. 选择相机
2. 点击"设为默认"
3. 默认相机显示星号标记

### 默认相机用途

默认相机自动用于：

- 视野计算
- 像素比例计算
- 曝光时间估算
- 存储空间计算

## 视野计算

### 与望远镜配合

选择望远镜和相机后自动计算：

**视野角度**
```
FOV（角度）= 2 × arctan(传感器尺寸 / (2 × 焦距))
```

**像素比例**
```
像素比例（角秒/像素）= 206.265 × 像素大小（μm）/ 焦距（mm）
```

### 采样评估

评估成像质量：

| 采样率 | 适用条件 |
|-------|---------|
| < 0.5"/px | 过采样，适合优良视宁度 |
| 0.5-1.5"/px | 最佳采样，匹配视宁度 |
| 1.5-3"/px | 欠采样，适合大视场 |
| > 3"/px | 严重欠采样 |

### 视野框显示

在星图上显示视野：

1. 选择望远镜和相机
2. 启用"显示视野框"
3. 矩形框显示实际视野
4. 可调整方向和位置

## 分辨率模式

### Binning 设置

设置像素合并模式：

- **1×1**：全分辨率
- **2×2**：4像素合并
- **3×3**：9像素合并
- **4×4**：16像素合并

### Binning 效果

| Binning | 分辨率 | 灵敏度 | 视野 |
|---------|-------|-------|------|
| 1×1 | 100% | 1× | 不变 |
| 2×2 | 25% | 4× | 不变 |
| 3×3 | 11% | 9× | 不变 |

### ROI（感兴趣区域）

设置读取区域：

- 减少读出时间
- 适合行星拍摄
- 自定义区域大小

## 颜色设置

### 单色 vs 彩色

**单色相机**
- 更高灵敏度
- 需要滤镜
- 更灵活的后处理

**彩色相机**
- 一次获取RGB
- 操作更简单
- 分辨率损失

### Bayer 模式

彩色相机的 Bayer 排列：

- RGGB（最常见）
- GRBG
- BGGR
- GBRG

### 滤镜配置

为相机配置滤镜轮：

1. 添加滤镜轮配置
2. 定义每个槽位的滤镜
3. 关联到相机

## 相机预设

### 常用相机数据库

从预设数据库选择：

1. 点击"从预设添加"
2. 搜索品牌或型号
3. 选择匹配的型号
4. 参数自动填充

### 支持的品牌

**专业天文相机**
- ZWO ASI 系列
- QHY 系列
- Atik 系列
- SBIG 系列
- FLI 系列

**消费相机**
- Canon EOS 系列
- Nikon D 系列
- Sony α 系列

## 导入导出

### 导出配置

备份相机配置：

1. 选择要导出的相机
2. 点击"导出"
3. 选择保存位置
4. 保存为 JSON 文件

### 导入配置

从文件导入相机：

1. 点击"导入"
2. 选择配置文件
3. 确认导入
4. 相机添加到列表

### 从其他软件导入

支持导入的格式：

- N.I.N.A. 配置
- SGPro 配置
- APT 配置

## 曝光计算

### 信噪比估算

根据相机参数估算：

- 目标亮度
- 天空背景
- 读出噪声
- 暗电流噪声

### 最佳曝光时间

计算最佳单帧曝光：

- 考虑背景限制
- 避免过曝
- 优化信噪比

### 总曝光规划

规划总曝光时间：

- 目标信噪比
- 单帧时间
- 总帧数
- 总时间

## 存储估算

### 单帧大小

计算单帧文件大小：

```
文件大小 = 宽度像素 × 高度像素 × 位深度 / 8
```

### 总存储需求

估算拍摄所需存储：

- 计划帧数
- 文件格式（RAW/FITS/TIFF）
- 压缩设置

## 常见问题

### 传感器尺寸不确定

如何确定传感器尺寸：

1. 查看相机规格表
2. 根据像素数和像素大小计算
3. 查阅在线数据库
4. 联系制造商

### 像素大小测量

如果没有官方数据：

```
像素大小 = 传感器宽度 / 水平像素数 × 1000
```

### 视野不匹配

可能的原因：

1. 传感器参数错误
2. 焦距参数错误
3. 使用了裁剪模式
4. 有减焦/增焦镜

## 相关文档

- [设备概览](index.md)
- [望远镜配置](telescopes.md)
- [曝光计算](../observation-planning/index.md)
